<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å‚©éŸµæ–°ç«  - å‚©æ–‡åŒ–è®°å¿†æ¸¸æˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Noto+Serif+SC:wght@500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #1A1C1A;
      --gold: #8E7C58;
      --green: #4B5650;
      --beige: #FBE9BB;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: var(--bg-color);
      color: var(--beige);
      font-family: 'Noto Serif SC', serif;
    }

    #stars {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .layout {
      position: relative;
      z-index: 2;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .main-title {
      font-family: 'Great Vibes', cursive;
      font-size: 70px;
      margin: 20px;
      background: linear-gradient(135deg, #FBE9BB, #8E7C58);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .game-info {
      display: flex;
      gap: 30px;
      margin-bottom: 20px;
      font-size: 18px;
    }

    .info-item {
      text-align: center;
    }

    .game-container {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      gap: 15px;
    }

    .card {
      width: 100px;
      height: 100px;
      perspective: 600px;
      cursor: pointer;
    }

    .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 10px;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-front {
      background-color: var(--green);
    }

    .card-back {
      background-color: var(--gold);
      transform: rotateY(180deg);
      flex-direction: column;
    }

    .card-image {
      max-height: 60px;
      margin-bottom: 5px;
    }

    .game-message {
      margin: 15px;
      font-size: 18px;
    }

    .restart-btn {
      margin-top: 10px;
      background-color: var(--gold);
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
    }

    .restart-btn:hover {
      background-color: #a08b6f;
    }
  </style>
</head>
<body>

<canvas id="stars"></canvas>

<div class="layout">
  <div class="main-title">NuÃ³ Culture</div>

  <div class="game-info">
    <div class="info-item"><div>æ—¶é—´</div><div id="timer">60</div></div>
    <div class="info-item"><div>å¾—åˆ†</div><div id="score">0</div></div>
    <div class="info-item"><div>é…å¯¹</div><div id="matches">0/3</div></div>
  </div>

  <div class="game-message" id="gameMessage">ç‚¹å‡»ä»»æ„å¡ç‰‡å¼€å§‹æ¸¸æˆï¼</div>

  <div class="game-container" id="gameContainer"></div>

  <button class="restart-btn" id="restart-btn">é‡æ–°å¼€å§‹</button>
</div>

<!-- æ¨¡æ€æ¡† -->
<div class="modal fade" id="resultModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header">
        <h5 class="modal-title">ğŸ­ å‚©é¢ä»‹ç»</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p id="maskInfo">ä½ æ‰¾åˆ°äº†ç›®æ ‡å‚©é¢ï¼</p>
        <img id="maskImage" class="img-fluid mt-2" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-light" onclick="restartGame()">å†ç©ä¸€æ¬¡</button>
      </div>
    </div>
  </div>
</div>

<script>
const gameImages = [
{ id:1,name: "å…«åå¤§ç‹", img: "images/å…«åå¤§ç‹.jpg", intro: "å…«åå¤§ç‹å‚©é¢ä¸»è¦ä¸æ±Ÿè¥¿å‚©æ–‡åŒ–ç›¸å…³ï¼Œå±äºæ±Ÿè¥¿å‚©é¢å…·çš„ä¸€ç§ã€‚æ±Ÿè¥¿å‚©èˆå†å²æ‚ ä¹…ï¼Œå°¤å…¶åœ¨èµ£å—ã€èµ£ä¸œç­‰åœ°ç››è¡Œï¼Œå…«åå¤§ç‹å‚©é¢ä½œä¸ºå…¶ä¸­çš„ä»£è¡¨ä¹‹ä¸€ï¼Œå…·æœ‰é²œæ˜çš„åœ°æ–¹ç‰¹è‰²2ã€‚å…«åå¤§ç‹å‚©é¢é€šå¸¸ä»¥æœ¨è´¨é›•åˆ»ï¼Œå½¢è±¡å¨çŒ›å¤¸å¼ ï¼Œè‰²å½©æµ“çƒˆï¼Œå¸¦æœ‰ç‹°ç‹æˆ–å¨ä¸¥çš„è¡¨æƒ…ï¼Œè±¡å¾é©±é‚ªé€ç–«çš„ç¥åŠ›ã€‚åœ¨å¤ä»£å‚©ä»ªä¸­ï¼Œå‚©é¢å…·æ‰®æ¼”ç€æ²Ÿé€šäººç¥çš„åª’ä»‹è§’è‰²ï¼Œå…«åå¤§ç‹å‚©é¢å¯èƒ½ä»£è¡¨ä¸€ä½é•‡å®ˆå››æ–¹ã€é©±é™¤é‚ªç¥Ÿçš„ç¥çµæˆ–æ­¦å°†å½¢è±¡ã€‚éƒ¨åˆ†å…«åå¤§ç‹å‚©é¢ä½œä¸ºæ–‡ç‰©æˆ–éé—å±•å“è¢«æ”¶è—ï¼Œå¦‚è´µå·çœæ°‘æ—åšç‰©é¦†å°±è—æœ‰ä¸€ä»¶å½“ä»£æ±Ÿè¥¿å…«åå¤§ç‹å‚©é¢ï¼ˆè—å“ç™»è®°å·ï¼šGM.1.7755ï¼‰" },
    { id:2,name: "å¤ªé˜³ç¥", img: "images/å¤ªé˜³ç¥.jpg", intro: "å¤ªé˜³ç¥å‚©é¢æ˜¯ä¸­å›½å‚©æ–‡åŒ–ä¸­çš„ä¸€ç§é‡è¦é¢å…·ï¼Œé€šå¸¸ä¸å¤ªé˜³å´‡æ‹œã€é©±é‚ªç¥ˆç¦çš„å®—æ•™ä»ªå¼ç›¸å…³ã€‚å…¶é€ å‹ç‰¹å¾å’Œæ–‡åŒ–å†…æ¶µåœ¨ä¸åŒåœ°åŒºçš„å‚©æ–‡åŒ–ä¸­æœ‰æ‰€å·®å¼‚ï¼Œä½†æ™®éå…·æœ‰ç¥åœ£ã€å¨ä¸¥çš„è±¡å¾æ„ä¹‰ã€‚å¤ªé˜³ç¥å‚©é¢çš„èµ·æºå¯ä»¥è¿½æº¯åˆ°è¿œå¤æ—¶æœŸçš„è‡ªç„¶å´‡æ‹œï¼Œå°¤å…¶æ˜¯å¯¹å¤ªé˜³çš„ä¿¡ä»°ã€‚" },
    {id:3 name: "å°é¬¼", img: "images/å°é¬¼.jpg", intro: "å°é¬¼å‚©é¢æ˜¯ä¸­å›½å‚©æ–‡åŒ–ä¸­çš„ä¸€ç§é‡è¦é¢å…·ç±»å‹ï¼Œä¸»è¦ç”¨äºå‚©æˆã€å‚©èˆç­‰æ°‘é—´ç¥­ç¥€å’Œé©±é‚ªä»ªå¼ä¸­ï¼Œä»£è¡¨é˜´é—´é¬¼å’æˆ–é‚ªç¥Ÿå½¢è±¡ï¼Œå…·æœ‰é©±é‚ªé•‡ç…çš„è±¡å¾æ„ä¹‰ã€‚å°é¬¼å‚©é¢æºäºå¤ä»£å·«å‚©æ–‡åŒ–ï¼Œå±äºå‚©æˆä¸­çš„â€œå‡¶ç¥â€æˆ–â€œé˜´é—´é¬¼å·®â€è§’è‰²ï¼Œå¦‚é»‘ç™½æ— å¸¸ã€ç‰›å¤´é©¬é¢ã€åˆ¤å®˜å°é¬¼ç­‰ã€‚åœ¨å‚©ä»ªä¸­ï¼Œå°é¬¼é¢å…·é€šå¸¸ç”¨äºæ‰®æ¼”é‚ªç¥Ÿæˆ–é¬¼å’ï¼Œé€šè¿‡å¤¸å¼ ç‹°ç‹çš„å½¢è±¡éœ‡æ…‘æ¶çµï¼Œè¾¾åˆ°é©±é‚ªé€ç–«çš„ç›®çš„ã€‚" },
];

let score = 0, matches = 0, timeLeft = 60, timer = null;
let flippedCards = [], canFlip = true;
let selectedIntro = {};

const container = document.getElementById('gameContainer');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const matchesEl = document.getElementById('matches');
const messageEl = document.getElementById('gameMessage');

function shuffleArray(array) {
  const newArr = [...array, ...array];
  for (let i = newArr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
  }
  return newArr;
}

function createCard(image) {
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.id = image.id;
  card.innerHTML = `
    <div class="card-inner">
      <div class="card-front"></div>
      <div class="card-back">
        <img class="card-image" src="${image.src}">
        <div class="card-name">${image.name}</div>
      </div>
    </div>`;
  card.addEventListener('click', flipCard);
  return card;
}

function flipCard() {
  if (!canFlip || this.classList.contains('flipped') || flippedCards.length >= 2) return;

  this.classList.add('flipped');
  flippedCards.push(this);

  if (flippedCards.length === 2) {
    canFlip = false;
    const [c1, c2] = flippedCards;
    if (c1.dataset.id === c2.dataset.id) {
      matches++;
      score += 10;
      updateUI();
      const matchInfo = gameImages.find(i => i.id == c1.dataset.id);
      selectedIntro = matchInfo;
      setTimeout(() => {
        document.getElementById("maskInfo").innerText = `ğŸ­ ä½ æ‰¾åˆ°äº†ï¼š${matchInfo.name}\nğŸ“– ç®€ä»‹ï¼š${matchInfo.intro}`;
        document.getElementById("maskImage").src = matchInfo.src;
        new bootstrap.Modal(document.getElementById("resultModal")).show();
      }, 500);
      flippedCards = [];
      canFlip = true;
      if (matches === gameImages.length) endGame(true);
    } else {
      setTimeout(() => {
        c1.classList.remove('flipped');
        c2.classList.remove('flipped');
        flippedCards = [];
        canFlip = true;
      }, 1000);
    }
  }
}

function updateUI() {
  scoreEl.textContent = score;
  matchesEl.textContent = `${matches}/${gameImages.length}`;
}

function updateTimer() {
  timeLeft--;
  timerEl.textContent = timeLeft;
  if (timeLeft <= 0) endGame(false);
}

function startTimer() {
  timer = setInterval(updateTimer, 1000);
}

function endGame(win) {
  clearInterval(timer);
  canFlip = false;
  messageEl.textContent = win ? `æ­å–œèƒœåˆ©ï¼å¾—åˆ†ï¼š${score}` : `âŒ› æ—¶é—´åˆ°ï¼å¾—åˆ†ï¼š${score}`;
}

function initGame() {
  container.innerHTML = '';
  score = 0; matches = 0; timeLeft = 60; flippedCards = []; canFlip = true;
  updateUI(); timerEl.textContent = timeLeft; messageEl.textContent = 'ç‚¹å‡»ä»»æ„å¡ç‰‡å¼€å§‹æ¸¸æˆï¼';
  clearInterval(timer);

  const shuffled = shuffleArray(gameImages);
  shuffled.forEach(img => {
    const card = createCard(img);
    container.appendChild(card);
  });
}

function restartGame() {
  bootstrap.Modal.getInstance(document.getElementById("resultModal")).hide();
  initGame();
  startTimer();
}

initGame();

document.getElementById('restart-btn').addEventListener('click', () => {
  initGame();
  startTimer();
});

container.addEventListener('click', function(e) {
  if (e.target.closest('.card') && !timer) {
    startTimer();
  }
}, { once: true });
</script>

<!-- æ˜Ÿç©ºåŠ¨ç”» -->
<script>
const canvas = document.getElementById('stars');
const ctx = canvas.getContext('2d');
let stars = [];

function initStars(n) {
  stars = [];
  for (let i = 0; i < n; i++) {
    stars.push({
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      r: Math.random() * 1.5,
      alpha: Math.random(),
      delta: Math.random() * 0.02
    });
  }
}

function animateStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let s of stars) {
    s.alpha += s.delta;
    if (s.alpha <= 0 || s.alpha >= 1) s.delta = -s.delta;
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, 2 * Math.PI);
    ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
    ctx.fill();
  }
  requestAnimationFrame(animateStars);
}

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  initStars(100);
}

window.addEventListener('resize', resizeCanvas);
resizeCanvas();
animateStars();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
